# 라즈베리파이 블루투스 통신

### 관련 패키지 설치

-   sudo apt-get install -y bluetooth blueman bluez
-   sudo apt-get install -y python-bluetooth
-   pip3 install pybluez
-   sudo reboot

<br>

### 블루투스 장치 페어링

$ `bluetoothctl`

```
[bluetooth]# scan on
Discovery started
[CHG] Controller DC:A6:32:AC:76:8E Discovering: yes
[NEW] Device E4:7D:BD:A4:DD:C5 [TV] Samsung Q7 Series (55)
[NEW] Device 98:D3:51:F9:42:AE HC-05
[NEW] Device 3C:77:E6:CD:A7:FE DESKTOP-K3PUDE3
[NEW] Device 00:51:ED:8D:47:1B S60UPI
[bluetooth]# pair 98:D3:51:F9:42:AE
[CHG] Device 98:D3:51:F9:42:AE Connected: yes
Request PIN code
[agent] Enter PIN code: 1234
[CHG] Device 98:D3:51:F9:42:AE UUIDs: 00001101-0000-1000-8000-00805f9b34fb
[CHG] Device 98:D3:51:F9:42:AE ServicesResolved: yes
[CHG] Device 98:D3:51:F9:42:AE Paired: yes
Pairing successful
[bluetooth]# agent on
[bluetooth]# default-agent
[bluetooth]# exit
```

<br>

**라즈베리파이** **->** **아두이노**

bt_ex01.py

```python
from bluetooth import * 

LINE_END =  "\r\n"

# Create the client socket 
client_socket=BluetoothSocket( RFCOMM ) 
client_socket.connect(("00:18:91:D7:67:13", 1))  # 접속 

try:
    while True: 
        msg = input("Send : ") + LINE_END 
        client_socket.send(msg) 	# 전송
except KeyboardInterrupt:
    print("Finished")

client_socket.close() 
```

<br>

**아두이노 -> 라즈베리파이**

bt_ex02.py

```python
from bluetooth import * 

LINE_END =  "\r\n"

# Create the client socket 
client_socket=BluetoothSocket( RFCOMM ) 
client_socket.connect(("00:18:91:D7:67:13", 1))  # 접속 

try:
    while True: 
        msg = input("Send : ") + LINE_END 
        client_socket.send(msg) 	# 전송

        msg = client_socket.recv(1024)  # 수신
        print(f"recived message : {msg}")
except KeyboardInterrupt:
    print("Finished")

client_socket.close() 
```



<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>